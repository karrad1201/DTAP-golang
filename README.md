# DTAP - Dual Token Authentication Protocol

![Go Version](https://img.shields.io/badge/Go-1.21+-blue)
![Fiber](https://img.shields.io/badge/Fiber-2.x-green)
![Redis](https://img.shields.io/badge/Redis-Dragonfly-red)
![License](https://img.shields.io/badge/License-MIT-yellow)

**Протокол двухуровневой аутентификации с привязкой к устройству и геолокации**

## 🎯 О проекте

DTAP - это инновационная система аутентификации, использующая два типа токенов:

- **GJWT (Global JWT)** - долгосрочный токен (до 30 дней), привязанный к пользователю и устройству
- **LJWT (Local JWT)** - сессионный токен (24 часа), привязанный к IP-адресу и стране

## 🛡️ Безопасность

### Ключевые особенности:
- **Привязка к устройству** - смена устройства инвалидирует все токены
- **Геолокация** - смена страны требует переавторизации
- **IP-трекинг** - защита от перехвата сессий
- **Автоматическая инвалидация** при подозрительной активности
- **Многоуровневое кеширование** - in-memory + Redis + SQLite

## 🏗️ Архитектура

┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│ Клиент │ │ DTAP Сервер │ │ Хранилище │
│ │ │ │ │ │
│ • LJWT (24ч) │◄──►│ • Auth Middleware│◄──►│ • Redis (кеш) │
│ • Device ID │ │ • Token Issuer │ │ • SQLite (перс.)│
│ • Country Code │ │ • Security │ │ • Sync.Map │
└─────────────────┘ └─────────────────┘ └─────────────────┘


## 🚀 Быстрый старт

### Требования
- Docker & Docker Compose
- Go 1.24 (для разработки)

### Запуск

1. **Клонируйте репозиторий:**
```bash
git clone <repository-url>
cd dtap